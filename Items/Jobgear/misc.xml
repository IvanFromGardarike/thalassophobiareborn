<?xml version="1.0" encoding="utf-8"?>
<Items>
	<!-- GUIDES -->
	<Item name="" identifier="thal_guidegen" hideconditionbar="true" spritecolor="180,255,220,255" InventoryIconColor="180,255,220,255" category="Equipment" Tags="smallitem" cargocontaineridentifier="metalcrate" description="" scale="0.5" impactsoundtag="impact_soft" showcontentsintooltip="true">
    <!--<PreferredContainer primary="medcab" minamount="1" maxamount="1" spawnprobability="1" />-->
    <InventoryIcon texture="Content/Items/InventoryIconAtlas.png" sourcerect="897,449,63,63" origin="0.5,0.5" />
    <Sprite texture="Content/Items/Medical/Medicines.png" sourcerect="223,69,38,70" depth="0.6" origin="0.5,0.5" />
    <Body width="25" height="40" density="8" />
    <Holdable slots="Any,RightHand+LeftHand" holdpos="57,-20" aimable="false" handle1="-25,32" handle2="-27,34" msg="ItemMsgPickUpSelect" >
      <!-- page statuses -->
      <!-- HELP/INTRO -->
      <StatusEffect type="OnActive" target="Contained" >
				<RequiredItems identifier="thal_guidegen_scanner,thal_guidegen_index,thal_guidegen_dna" type="Contained" />
				<Conditional OriginalOutpost="help" targetcontainer="true" />
				<RemoveItem />
      </StatusEffect>
      <StatusEffect type="OnActive" target="This" delay="0.1" >
				<RequiredItems identifier="thal_guidegen_scanner,thal_guidegen_index,thal_guidegen_dna" type="Contained" />
				<Conditional OriginalOutpost="help" />
				<SpawnItem spawnposition="ThisInventory" identifier="thal_guidegen_intro" />
      </StatusEffect>
			<!-- INDEX -->
      <StatusEffect type="OnActive" target="Contained" >
				<RequiredItems identifier="thal_guidegen_scanner,thal_guidegen_intro,thal_guidegen_dna" type="Contained" />
				<Conditional OriginalOutpost="index" targetcontainer="true" />
				<RemoveItem />
      </StatusEffect>
      <StatusEffect type="OnActive" target="This" delay="0.1" >
				<RequiredItems identifier="thal_guidegen_scanner,thal_guidegen_intro,thal_guidegen_dna" type="Contained" />
				<Conditional OriginalOutpost="index" />
				<SpawnItem spawnposition="ThisInventory" identifier="thal_guidegen_index" />
      </StatusEffect>
      <!-- SCANNER -->
      <StatusEffect type="OnActive" target="Contained" >
				<RequiredItems identifier="thal_guidegen_index,thal_guidegen_intro,thal_guidegen_dna" type="Contained" />
				<Conditional OriginalOutpost="scanner" targetcontainer="true" />
				<RemoveItem />
      </StatusEffect>
      <StatusEffect type="OnActive" target="This" delay="0.1" >
				<RequiredItems identifier="thal_guidegen_index,thal_guidegen_intro,thal_guidegen_dna" type="Contained" />
				<Conditional OriginalOutpost="scanner" />
				<SpawnItem spawnposition="ThisInventory" identifier="thal_guidegen_scanner" />
      </StatusEffect>
      <!-- DNA -->
      <StatusEffect type="OnActive" target="Contained" >
				<RequiredItems identifier="thal_guidegen_index,thal_guidegen_intro,thal_guidegen_scanner" type="Contained" />
				<Conditional OriginalOutpost="scanner" targetcontainer="true" />
				<RemoveItem />
      </StatusEffect>
      <StatusEffect type="OnActive" target="This" delay="0.1" >
				<RequiredItems identifier="thal_guidegen_index,thal_guidegen_intro,thal_guidegen_scanner" type="Contained" />
				<Conditional OriginalOutpost="scanner" />
				<SpawnItem spawnposition="ThisInventory" identifier="thal_guidegen_scanner" />
      </StatusEffect>
		</Holdable>
    <ItemContainer capacity="1" hideitems="true" itempos="16,-15" canbeselected="true" containedspritedepth="0.56" drawhudwhenequipped="true" uilabel="apcbat" spawnwithid="thal_guidegen_intro" drawinventory="false" >
      <ContainedStateIndicator texture="Content/UI/ContainerIndicators.png" sourcerect="0,157,1,1" />
      <CustomInterface canbeselected="true" drawhudwhenequipped="true" msg="ItemMsgWriteSelectPen" uilabel="apcbat" >
        <GuiFrame relativesize="0.50,0.10" anchor="Bottom" absoluteoffset="20,20" style="ItemUI" uilabel="apcbat" />
        <TextBox text="guidebookinstruction" propertyname="OriginalOutpost"></TextBox>
      </CustomInterface>
      <CustomInterface canbeselected="false" drawhudwhenequipped="true">
      <GuiFrame relativesize="0.15,0.5" anchor="TopRight" absoluteoffset="20,20" style="ItemUI" color="0,0,0,0" />
      <Button text="help">
        <StatusEffect type="OnUse" targettype="This" OriginalOutpost="help" />
      </Button>
      <Button text="index">
        <StatusEffect type="OnUse" targettype="This" OriginalOutpost="index" />
      </Button>
      <Button text="scanner">
        <StatusEffect type="OnUse" targettype="This" OriginalOutpost="scanner" />
      </Button>
      <Button text="dna">
        <StatusEffect type="OnUse" targettype="This" OriginalOutpost="dna" />
      </Button>
    </CustomInterface>
    </ItemContainer>
  </Item>
  <!-- pages -->
  <Item name="" identifier="thal_guidegen_intro" Tags="smallitem" hideinmenus="true">
    <Sprite texture="Content/Items/Medical/Medicines.png" sourcerect="223,69,38,70" depth="0.6" origin="0.5,0.5" />
  </Item>
  <Item name="" identifier="thal_guidegen_index" Tags="smallitem" hideinmenus="true">
    <Sprite texture="Content/Items/Medical/Medicines.png" sourcerect="223,69,38,70" depth="0.6" origin="0.5,0.5" />
  </Item>
  <Item name="" identifier="thal_guidegen_scanner" Tags="smallitem" hideinmenus="true">
    <Sprite texture="Content/Items/Medical/Medicines.png" sourcerect="223,69,38,70" depth="0.6" origin="0.5,0.5" />
  </Item>
	<!--
	TODO:
	Rework this into a vanilla headset override that gives channels depending on the clothes you wear/afflictions (ie husk, medics, team captains, clowns)
	-->
<Item name="" identifier="thal_headsetchannel" scale="0.5" category="Equipment" tags="smallitem" description="" cargocontaineridentifier="metalcrate" impactsoundtag="impact_metal_light">
    <InventoryIcon texture="Content/Items/InventoryIconAtlas.png" sourcerect="256,0,64,64" origin="0.5,0.5" />
    <Sprite name="Multichannel Headset" texture="Content/Items/Jobgear/headgears.png" depth="0.6" sourcerect="28,321,49,62" origin="0.5,0.5" />
    <Body radius="15" height="10" density="30" />
    <Deconstruct time="10">
      <Item identifier="headset" />
      <Item identifier="wificomponent" />
    </Deconstruct>
    <WifiComponent range="35000.0" LinkToChat="true" MinChatMessageInterval="0.0" Channel="1">
      <RequiredItems items="mobilebattery" type="Contained" />
      <CustomInterface canbeselected="false" drawhudwhenequipped="true">
      <GuiFrame relativesize="0.15,0.1" anchor="BottomLeft" absoluteoffset="0,0" style="ItemUI" />
      <TextBox text="Active Channel" propertyname="Channel" />
      </CustomInterface>
    </WifiComponent>
    <ItemContainer capacity="1" hideitems="true">
      <ContainedStateIndicator texture="Content/UI/ContainerIndicators.png" sourcerect="1,70,107,31" />
      <Containable items="mobilebattery" />
    </ItemContainer>
    <Wearable limbtype="Head" slots="Any,Headset" msg="ItemMsgPickUpSelect" displaycontainedstatus="true">
      <StatusEffect type="OnWearing" target="Contained" Condition="-0.05">
        <RequiredItem items="batterycell" type="Contained" />
      </StatusEffect>
      <StatusEffect type="OnWearing" target="Contained" Condition="-0.025">
        <RequiredItem items="fulguriumbatterycell" type="Contained" />
      </StatusEffect>
      <StatusEffect type="OnWearing" target="Contained" Condition="-0.05">
        <RequiredItem excludedidentifiers="batterycell,fulguriumbatterycell" type="Contained" />
      </StatusEffect>
      <sprite name="Headset Wearable" texture="Content/Items/Jobgear/headgears.png" limb="Head" hidelimb="false" inheritlimbdepth="true" inherittexturescale="true" hideotherwearables="false" sourcerect="28,321,49,62" origin="0.5,0.6" />
    </Wearable>
    
  <!-- a whole item to make shitting noises......... -->
  </Item>
  <Item name="emshitter" identifier="thal_emshitter" scale="0.5" >
    <Sprite name="shitter" texture="Content/Items/Jobgear/headgears.png" depth="0.6" sourcerect="1,1,1,1" origin="0.5,0.5" />
    <Body radius="15" height="10" density="30" bodytype="Kinematic" />
    <ItemContainer capacity="1" hideitems="true">
      <ContainedStateIndicator texture="Content/UI/ContainerIndicators.png" sourcerect="1,70,107,31" />
      <Containable items="mobilebattery" />
      <StatusEffect type="Always" target="This" lifetime="1.0">
				<Sound file="Mods/Thalassophobia/Items/Jobgear/Clown/fart.ogg" range="900" />
      </StatusEffect>
      <StatusEffect type="Always" target="This" delay="2.0">
				<RemoveItem />
      </StatusEffect>
    </ItemContainer>
  </Item>
  <!-- autofill spawns in outposts and triggers an event that triggers other events in thalass -->
  <Item name="eventstarter" identifier="thal_eventstarter" scale="0.5" tags="fuelrod" >
    <Sprite name="rngflag" texture="Content/Items/Jobgear/headgears.png" depth="0.6" sourcerect="1,1,1,1" origin="0.5,0.5" />
    <PreferredContainer primary="outpostreactor" minamount="1" maxamount="1" spawnprobability="1.0" />
    <ItemContainer capacity="1" hideitems="true">
      <StatusEffect type="Always" target="This" >
				<TriggerEvent identifier="thal_eventmaster" />
				<RemoveItem />
      </StatusEffect>
    </ItemContainer>
  </Item>
  
  <!--RNG THINGS
  to use properly, spawnitem rngseed, then wait for 1 second, then use nearbyitems to check nearby rng output's condition. use and comparison to apply effect to you and rngthing (rngthing is junk and will delete itself in a few secs) -->
  
  <!-- triggers event, spawns rngthing, deletes self instantly (seems to be some problem with triggerevent and stacking) -->
  <Item name="rngseed" identifier="thal_rngseed" scale="0.5" >
    <Sprite name="shitter" texture="Content/Items/Jobgear/headgears.png" depth="0.6" sourcerect="1,1,1,1" origin="0.5,0.5" />
    <Body radius="15" height="10" density="30" bodytype="Kinematic" />
    <ItemContainer capacity="1" hideitems="true">
      <StatusEffect type="Always" target="This" >
				<TriggerEvent identifier="thal_rngcall" />
				<SpawnItem identifier="thal_rngoutput" />
				<RemoveItem />
      </StatusEffect>
    </ItemContainer>
  </Item>
  
  <!-- output target for the event, what items utilizing rng should scan for -->
  <Item name="rngthing" identifier="thal_rngoutput" scale="0.5" tags="rngthing" >
    <Sprite name="shitter" texture="Content/Items/Jobgear/headgears.png" depth="0.6" sourcerect="1,1,1,1" origin="0.5,0.5" />
    <Body radius="15" height="10" density="30" bodytype="Kinematic" />
    <ItemContainer capacity="1" hideitems="true">
      <StatusEffect type="Always" target="This" stackable="false" delay="3.0" >
				<RemoveItem />
      </StatusEffect>
    </ItemContainer>
  </Item>
</Items>
